# Промежуточный веб-сервер для программы Libre Hardware Monitor
Программа [Libre Hardware Monitor](https://github.com/LibreHardwareMonitor/LibreHardwareMonitor)  умеет создавать веб сервер с json с инфой о различных параметрах компьютера, такмих как температура загрузка итп <br> 
единственная проблема, что файл получается очень большим, и микроконтроллерам например таким как esp, сложно его ворочить <br> 
какихто возможностей существенно уменьшить вывод программы, я не нашел, и эта мини программа призвана исправить это недоразумение и создает промежуточный веб сервер в который будет отображать только необходимые параметры <br> 
Соответсвенно для работы, необходимо чтобы веб сервер  Libre Hardware Monitor был запущен тоже 
### Возможности программы
+ Запускает промежуточный веб сервер с отфильтрованными Json данными на основе данных из вервера LHM
+ Формирует путь до параметра в Json LHM
+ На основе данных введеных данных формирует скетч для ESP микроконтроллеров в ардуино среде
+ Формирует переменных для вставки в код
+ Максимальное количество параметров ограничено 50-ю, цифра в с потолка, в коде можно увеличить, если будете собирать свой exe

по умолчанию запускается на http://your_ip:5001/filtered_data <br>
чтобы получить доступ извне нужно добавить правило в брандмауэр и разрешить входящие на порту 5001(поумолчанию)<br>
<br>
## для работы нужно
+ запустить сервер в программе Libre Hardware Monitor
+ сформировать Json пути до выбранных параметром (см. инструкцию ниже)
+ добавить необходимое количесвтво параметров и сохранить их (сохранятся в paths.json в тойже папке что и програма)
+ локальный ip адрес формируется программой, при необходимости можно изменить и нажать сохранить (сохранятся в settings.json)
+ если нужно сформировать скетч то нужно выбрать тип данных и ввести логин и пароль от вайфай (можно оставить пустым и потом ввести в скетче)
+ нажать кнопку запустить 



## Формировка путей 
Json файл программы LHM очень большой, и разобраться в нем очень сложно, но для упрощения процесса есть ряд инструментов <br>
+ делаем окно сервера поверх всех окон, нажав на чекбокс
+ нажимаем открыть напротив LHM URL, откроется вебсервер LHM (если он запущен), и копируем все что там есть 
+ далее переходим на сайт [jsonformatter.org](https://jsonformatter.org/json-parser) , ссылка есть в окне программы
+ вставляем в левое поле скопированные данные, ждем когда сайт спарсит данные
+ ищем нужный параметр в окне справа, жмем на его значение, вверху отобразится путь до него который нужно аккуратно скопировать 
 получиться должно что то типа такого ```Children►0►Children►3►Children►6►Children►0►Value``` <br>
+ нажимаем кнопку добавить параметр и вставляем этот путь в поле Путь в LHM? вводим имя параметра, выбираем тип данных и жмем сохранить
+ все параметр сохранен в файле paths.json 
+ все это можно проделывать и при запущенном сервере, данные в нем будут обновляться

<br> дальнейшая работа с ним такая же как и с обычным сервером LHM, только не надо настраивать филтры и пути до параметров будут короче
[здесь](https://dzen.ru/a/ZFaVALzPNRycfvjs?ysclid=m7901ppl29114638609) более подробное описание запуска сервера в LHM 

![Снимок экрана 2025-02-19 012342](https://github.com/user-attachments/assets/48d1ed87-aced-430d-9cf2-576cd555e976)

## Запуск и сборка exe файла
+ для запуска скрипта или сборки exe файла необходим [python](https://www.python.org/downloads/), я тестировал на версии 3.13 
+ после установки python, перейти в папку где расположен скрипт 
+ правкой кнопкой -> открыть в терминале -> скопировать команду -> энтер
+ кириллицы в пути лучше избегать

установить библиотеки<br>
```pip install Flask requests tkinter```

запуск скрипта<br>
```python 1WEB_SERVER_for_LHM.py```

сборка exe --- иконки должна лежать в той же папке где и скрипт<br>
```pyinstaller --onefile --windowed --icon=icon.ico 1WEB_SERVER_for_LHM.py```

собирётся экзешник в папке dist, 
рядом в с exe в ту же папку нужно положить все файлы иконок <br>




