# Промежуточный веб-сервер для программы Libre Hardware Monitor
Программа [Libre Hardware Monitor](https://github.com/LibreHardwareMonitor/LibreHardwareMonitor)  умеет создавать веб сервер с json состояния компьютера, такмих как температура загрузка итп <br> 
единственная проблема, что файл получается очень большим, и микроконтроллерам например таким как esp, сложно его ворочить <br> 
эта мини программа призвана исправить это недоразумение и создает промежуточный веб сервер в который будет отображать только необходимые параметры 

Соответсвенно для работы, необходимо чтобы веб сервер  Libre Hardware Monitor был запущен тоже 

параметры запуска:
   app.run(host='0.0.0.0', port=5001, threaded=True)
   @app.route('/filtered_data', methods=['GET']) 

и например у меня конечный адрес выглядит так: http://192.168.1.82:5001/filtered_data
по этому адресу доступен json файл 

чтобы получить доступ извне нужно добавить правило в брандмауэр и разрешить входящие на порту 5001<br>
<br>
## для работы нужно
+ прописать пути, конкретно для вашего LHM 
+ запустить сервер в программе и открыть его, 
например ip компа с портом у меня выходит такой http://192.168.1.82:8085/data.json <br> у вас соответсвенно ip будет отличаться, можно посмотреть в роутере или в LHM в настройках веб сервера
+ скопировать весь json и вставить его в парсер на сайте [jsonformatter.org](https://jsonformatter.org/json-parser)
+ справа выбрать нужный параметр и в заголовке вверху будет путь до него
+ и либо переписать его разделяя путь слешем, либо аккуратно скопировать
чтобы получился такой путь <br> 
Children►0►Children►3►Children►6►Children►0►Value
и вставить этот путь в нужное поле программы  
и нажать сохранить патч 
+ дальше нажать запустить сервер. <br>

окно программы закроется и запустится сервер по адресу: в.а.ш.i.p:5001/filtered_data <br>

чтобы закрыть веб сервер нужно открыть диспетчер устройств и завершить процесс 1WEB_SERVER_for_LHM <br>
благодаря единице впереди, процесс будет в самом верху списка <br> <br>
веб сервер создает json такого седержания: <br>
``` {"CPU_Load":"6.2 %","CPU_Temperature":"43.0 \u00b0C","ERROR":"","GPU_Fan":"0.0 %","GPU_Load":"1.0 %","GPU_Temperature":"50.0 \u00b0C","MEM_Load":"50.6 %"}```
<br> дальнейшая работа с ним такая же как и с обычным сервером LHM, только не надо настраивать филтры и пути до параметров будут короче

[здесь](https://dzen.ru/a/ZFaVALzPNRycfvjs?ysclid=m7901ppl29114638609) более подробное описание запуска сервера в LHM 
## Запуск и сборка exe файла
+ для запуска скрипта или сборки exe файла необходим [python](https://www.python.org/downloads/), я тестировал на версии 3.13 
+ после установки python, перейти в папку где расположен скрипт 
+ правкой кнопкой -> открыть в терминале -> скопировать команду -> энтер
+ кириллицы в пути лучше избегать

установить библиотеки<br>
```pip install Flask requests tkinter```

запуск скрипта<br>
```python 1WEB_SERVER_for_LHM.py```

сборка exe --- иконки должна лежать в той же папке где и скрипт<br>
```pyinstaller --onefile --windowed --icon=icon.ico 1WEB_SERVER_for_LHM.py```

собирётся экзешник в папке dist, 
рядом в с exe в ту же папку нужно положить все файлы иконок <br>


![Снимок экрана 2025-02-17 143902](https://github.com/user-attachments/assets/034f94ff-8d79-4dc7-bbcb-68371e524148)
